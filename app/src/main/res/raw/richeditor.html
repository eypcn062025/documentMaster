<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta
                name="viewport"
                content="width=device-width, initial-scale=1.0">
        <title>Rich Text Editor</title>
        <style>
            body {
                margin: 0;
                padding: 10px;
                font-family: Calibri, Arial, sans-serif;
                font-size: 14px;
                line-height: 1.6;
                background-color: #ffffff;
            }

            #editor {
                min-height: 300px;
                border: 1px solid #ddd;
                padding: 15px;
                outline: none;
                background: white;
                overflow-y: auto;
                border-radius: 4px;
            }


            table {
                border-collapse: collapse;
                width: 100%;
                margin: 15px 0;
                background-color: white;
            }

            table, th, td {
                border: 1px solid #333;
            }

            th, td {
                padding: 8px 12px;
                text-align: left;
                vertical-align: top;
                min-width: 50px;
                min-height: 20px;
            }

            th {
                background-color: #f5f5f5;
                font-weight: bold;
            }


            .bold { font-weight: bold; }
            .italic { font-style: italic; }
            .underline { text-decoration: underline; }


            p {
                margin: 8px 0;
                min-height: 1.2em;
            }

            h1 {
                font-size: 24px;
                margin: 16px 0 12px 0;
                font-weight: bold;
            }
            h2 {
                font-size: 20px;
                margin: 14px 0 10px 0;
                font-weight: bold;
            }
            h3 {
                font-size: 16px;
                margin: 12px 0 8px 0;
                font-weight: bold;
            }


            ul, ol {
                margin: 10px 0;
                padding-left: 30px;
            }

            li {
                margin: 4px 0;
            }


            .placeholder {
                color: #999;
                font-style: italic;
            }


            td:empty::before {
                content: '\00a0'; /* Non-breaking space */
                color: transparent;
            }
            img {
    max-width: 100%;
    height: auto;
    margin: 10px 0;
    border: 1px solid #ddd;
    border-radius: 4px;
    cursor: pointer;
}

img:hover {
    border-color: #1976D2;
    box-shadow: 0 2px 8px rgba(25, 118, 210, 0.3);
}
        </style>
    </head>
    <body>
        <div
                id="editor"
                contenteditable="true"
                spellcheck="false">
            <p class="placeholder">Buraya yazmaya baÅŸlayÄ±n...</p>
        </div>

        <script>
            let editor = document.getElementById('editor');
            let isPlaceholderVisible = true;


            function setHtml(html) {
                console.log('setHtml Ã§aÄŸrÄ±ldÄ±:', html.substring(0, 100));

                if (!html || html.trim() === '' || html === '<p><br></p>') {
                    showPlaceholder();
                    return;
                }


                let cleanHtml = normalizeHtml(html);
                editor.innerHTML = cleanHtml;
                hidePlaceholder();

                console.log('EditÃ¶re yÃ¼klenen HTML:', editor.innerHTML.substring(0, 100));
            }

            function getHtml() {
                if (isPlaceholderVisible) {
                    return '<p><br></p>';
                }

                let html = editor.innerHTML;

                // BoÅŸ iÃ§erik kontrolÃ¼
                let textContent = editor.innerText || editor.textContent || '';
                if (textContent.trim() === '') {
                    return '<p><br></p>';
                }

                console.log('getHtml dÃ¶ndÃ¼rÃ¼len:', html.substring(0, 100));
                return html;
            }

            function getText() {
                if (isPlaceholderVisible) {
                    return '';
                }
                return editor.innerText || editor.textContent || '';
            }

            // HTML normalizing fonksiyonu
            function normalizeHtml(html) {
                if (!html) return '<p><br></p>';

                // HTML entity'leri decode et
                let decoded = html
                    .replace(/&nbsp;/g, ' ')
                    .replace(/&amp;/g, '&')
                    .replace(/&lt;/g, '<')
                    .replace(/&gt;/g, '>')
                    .replace(/&quot;/g, '"')
                    .replace(/&#39;/g, "'");

                // EÄŸer HTML tag'larÄ± yoksa, dÃ¼z metin olarak iÅŸle
                if (!decoded.includes('<')) {
                    let lines = decoded.split('\n');
                    let htmlLines = lines.map(line =>
                        line.trim() === '' ? '<p><br></p>' : `<p>${escapeHtml(line)}</p>`
                    );
                    return htmlLines.join('');
                }

                return decoded;
            }

            // HTML escape fonksiyonu
            function escapeHtml(text) {
                let div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            // Placeholder yÃ¶netimi
            function showPlaceholder() {
                editor.innerHTML = '<p class="placeholder">Buraya yazmaya baÅŸlayÄ±n...</p>';
                isPlaceholderVisible = true;
            }

            function hidePlaceholder() {
                if (isPlaceholderVisible) {
                    let placeholder = editor.querySelector('.placeholder');
                    if (placeholder) {
                        editor.innerHTML = '<p><br></p>';
                    }
                    isPlaceholderVisible = false;
                }
            }

            // Format fonksiyonlarÄ±
            function setBold() {
                hidePlaceholder();
                document.execCommand('bold', false, null);
                editor.focus();
                notifyContentChange();
            }

            function setItalic() {
                hidePlaceholder();
                document.execCommand('italic', false, null);
                editor.focus();
                notifyContentChange();
            }

            function setUnderline() {
                hidePlaceholder();
                document.execCommand('underline', false, null);
                editor.focus();
                notifyContentChange();
            }

            function setTextColor(color) {
                hidePlaceholder();
                document.execCommand('foreColor', false, color);
                editor.focus();
                notifyContentChange();
            }

            function setBackgroundColor(color) {
                hidePlaceholder();
                document.execCommand('backColor', false, color);
                editor.focus();
                notifyContentChange();
            }

            function setFontSize(size) {
                hidePlaceholder();
                document.execCommand('fontSize', false, size);
                editor.focus();
                notifyContentChange();
            }

            function setFontName(name) {
                hidePlaceholder();
                document.execCommand('fontName', false, name);
                editor.focus();
                notifyContentChange();
            }

            // Hizalama fonksiyonlarÄ±
            function setAlignLeft() {
                hidePlaceholder();
                document.execCommand('justifyLeft', false, null);
                editor.focus();
                notifyContentChange();
            }

            function setAlignCenter() {
                hidePlaceholder();
                document.execCommand('justifyCenter', false, null);
                editor.focus();
                notifyContentChange();
            }

            function setAlignRight() {
                hidePlaceholder();
                document.execCommand('justifyRight', false, null);
                editor.focus();
                notifyContentChange();
            }

            // Liste fonksiyonlarÄ±
            function setOrderedList() {
                hidePlaceholder();
                document.execCommand('insertOrderedList', false, null);
                editor.focus();
                notifyContentChange();
            }

            function setUnorderedList() {
                hidePlaceholder();
                document.execCommand('insertUnorderedList', false, null);
                editor.focus();
                notifyContentChange();
            }

            // Tablo ekleme
            function insertTable(rows, cols) {
                hidePlaceholder();

                console.log('Tablo oluÅŸturuluyor:', rows + 'x' + cols);

                let tableHtml = '<table border="1" style="border-collapse: collapse; width: 100%; margin: 10px 0;">';

                for (let i = 0; i < rows; i++) {
                    tableHtml += '<tr>';
                    for (let j = 0; j < cols; j++) {
                        tableHtml += '<td style="padding: 8px; border: 1px solid #333; min-width: 80px; min-height: 25px;">';
                        tableHtml += 'HÃ¼cre ' + (i + 1) + '-' + (j + 1);
                        tableHtml += '</td>';
                    }
                    tableHtml += '</tr>';
                }
                tableHtml += '</table>';
                tableHtml += '<p><br></p>'; // Tablo sonrasÄ± boÅŸ paragraf

                // Ä°mleci kontrol et
                let selection = window.getSelection();
                if (selection.rangeCount > 0) {
                    let range = selection.getRangeAt(0);
                    range.deleteContents();

                    let tempDiv = document.createElement('div');
                    tempDiv.innerHTML = tableHtml;

                    while (tempDiv.firstChild) {
                        range.insertNode(tempDiv.firstChild);
                    }
                } else {
                    // Fallback: Sona ekle
                    editor.innerHTML += tableHtml;
                }

                editor.focus();
                notifyContentChange();

                console.log('Tablo eklendi');
            }

            function insertHtml(html) {
                hidePlaceholder();
                document.execCommand('insertHTML', false, html);
                editor.focus();
                notifyContentChange();
            }

            // Geri al/Ä°leri al
            function undo() {
                document.execCommand('undo', false, null);
                checkPlaceholder();
                editor.focus();
                notifyContentChange();
            }

            function redo() {
                document.execCommand('redo', false, null);
                editor.focus();
                notifyContentChange();
            }

            function selectAll() {
                if (!isPlaceholderVisible) {
                    document.execCommand('selectAll', false, null);
                }
            }

            function removeFormat() {
                hidePlaceholder();
                document.execCommand('removeFormat', false, null);
                editor.focus();
                notifyContentChange();
            }

            // Ä°Ã§erik deÄŸiÅŸikliÄŸi bildirimi
            function notifyContentChange() {
                if (window.Android && window.Android.onTextChanged) {
                    let html = getHtml();
                    window.Android.onTextChanged(html);
                }
            }

            // Placeholder kontrolÃ¼
            function checkPlaceholder() {
                let textContent = editor.innerText || editor.textContent || '';
                let htmlContent = editor.innerHTML || '';

                if (textContent.trim() === '' || htmlContent.trim() === '<p><br></p>' || htmlContent.trim() === '') {
                    showPlaceholder();
                } else if (isPlaceholderVisible && textContent.trim() !== 'Buraya yazmaya baÅŸlayÄ±n...') {
                    hidePlaceholder();
                }
            }

            // Event listeners
            editor.addEventListener('input', function(e) {
                console.log('Input event:', e.inputType);
                checkPlaceholder();

                // Biraz gecikme ile deÄŸiÅŸikliÄŸi bildir
                setTimeout(() => {
                    notifyContentChange();
                }, 100);
            });

            editor.addEventListener('keydown', function(e) {
                // Enter tuÅŸu ile placeholder'Ä± gizle
                if (e.key === 'Enter' && isPlaceholderVisible) {
                    e.preventDefault();
                    hidePlaceholder();
                    // Yeni paragraf ekle
                    document.execCommand('insertHTML', false, '<p><br></p>');
                    return;
                }

                // Backspace ile iÃ§erik boÅŸalÄ±rsa placeholder gÃ¶ster
                if (e.key === 'Backspace') {
                    setTimeout(checkPlaceholder, 10);
                }

                // Herhangi bir tuÅŸ ile placeholder'Ä± gizle
                if (isPlaceholderVisible && e.key.length === 1) {
                    hidePlaceholder();
                }
            });

            editor.addEventListener('paste', function(e) {
                console.log('Paste event');
                hidePlaceholder();

                // Paste sonrasÄ± iÃ§eriÄŸi kontrol et
                setTimeout(() => {
                    checkPlaceholder();
                    notifyContentChange();
                }, 100);
            });

            editor.addEventListener('focus', function() {
                console.log('Focus event, placeholder visible:', isPlaceholderVisible);

                if (window.Android && window.Android.onFocus) {
                    window.Android.onFocus();
                }

                // Focus olduÄŸunda placeholder'Ä± seÃ§
                if (isPlaceholderVisible) {
                    let placeholder = editor.querySelector('.placeholder');
                    if (placeholder) {
                        let range = document.createRange();
                        range.selectNodeContents(placeholder);
                        let selection = window.getSelection();
                        selection.removeAllRanges();
                        selection.addRange(range);
                    }
                }
            });

            editor.addEventListener('blur', function() {
                console.log('Blur event');

                if (window.Android && window.Android.onBlur) {
                    window.Android.onBlur();
                }

                checkPlaceholder();
            });

            // Tablo hÃ¼creleri iÃ§in Ã¶zel event listener
            editor.addEventListener('click', function(e) {
                if (e.target.tagName === 'TD' || e.target.tagName === 'TH') {
                    e.target.focus();
                }
            });

            // Sayfa yÃ¼klendiÄŸinde
            window.onload = function() {
                console.log('EditÃ¶r yÃ¼klendi');
                showPlaceholder();
                editor.focus();

                // Ä°lk yÃ¼klemede Android'e bildir
                setTimeout(() => {
                    if (window.Android && window.Android.onTextChanged) {
                        window.Android.onTextChanged(getHtml());
                    }
                }, 500);
            };
// Resim yÃ¼kleme fonksiyonu
function insertImage(base64Data, mimeType) {
    hidePlaceholder();

    if (!base64Data || !mimeType) {
        console.error('GeÃ§ersiz resim verisi');
        return;
    }

    let imgHtml = '<img src="data:' + mimeType + ';base64,' + base64Data + '" ' +
                  'style="max-width: 100%; height: auto; margin: 10px 0;" ' +
                  'alt="Belge Resmi" />';

    document.execCommand('insertHTML', false, imgHtml);
    editor.focus();
    notifyContentChange();

    console.log('Resim editÃ¶re eklendi');
}

// Resim boyutlandÄ±rma
function resizeImage(element, width, height) {
    if (element && element.tagName === 'IMG') {
        if (width) element.style.width = width + 'px';
        if (height) element.style.height = height + 'px';
        notifyContentChange();
    }
}

// Resim tÄ±klama olayÄ±
editor.addEventListener('click', function(e) {
    if (e.target.tagName === 'IMG') {
        e.target.style.border = '2px solid #1976D2';

        // 3 saniye sonra border'Ä± kaldÄ±r
        setTimeout(() => {
            e.target.style.border = '1px solid #ddd';
        }, 3000);

        console.log('Resim seÃ§ildi:', e.target.src.substring(0, 50) + '...');
    }
});

// Resim silme
editor.addEventListener('keydown', function(e) {
    if ((e.key === 'Delete' || e.key === 'Backspace')) {
        let selection = window.getSelection();
        if (selection.rangeCount > 0) {
            let range = selection.getRangeAt(0);
            let container = range.commonAncestorContainer;

            // EÄŸer seÃ§ili element resim ise
            if (container.nodeType === Node.ELEMENT_NODE) {
                let img = container.querySelector('img');
                if (img) {
                    img.remove();
                    notifyContentChange();
                    e.preventDefault();
                }
            }
        }
    }
});
// GeliÅŸmiÅŸ HTML alma - resimlerle birlikte
function getHtmlWithImages() {
    if (isPlaceholderVisible) {
        return '<p><br></p>';
    }

    let html = editor.innerHTML;

    // BoÅŸ iÃ§erik kontrolÃ¼
    let textContent = editor.innerText || editor.textContent || '';
    if (textContent.trim() === '') {
        return '<p><br></p>';
    }

    // Resimleri kontrol et ve temizle
    html = cleanImagesInHtml(html);

    console.log('getHtmlWithImages dÃ¶ndÃ¼rÃ¼len - uzunluk:', html.length);
    console.log('Resim sayÄ±sÄ±:', (html.match(/<img[^>]*>/g) || []).length);

    return html;
}

// HTML'deki resimleri temizler ve doÄŸrular
function cleanImagesInHtml(html) {
    // Bozuk Base64 resimlerini dÃ¼zelt
    html = html.replace(/<img[^>]*src="data:image\/[^;]+;base64,([^"]*)"[^>]*>/g, function(match, base64) {
        try {
            // Base64'Ã¼ temizle
            let cleanBase64 = base64.replace(/\s+/g, '').replace(/[^A-Za-z0-9+/=]/g, '');

            // Padding ekle gerekirse
            while (cleanBase64.length % 4 !== 0) {
                cleanBase64 += '=';
            }

            // Test decode (hata varsa placeholder dÃ¶ndÃ¼r)
            atob(cleanBase64);

            return match.replace(base64, cleanBase64);
        } catch (e) {
            console.error('Bozuk Base64 resim bulundu, placeholder ile deÄŸiÅŸtiriliyor:', e);
            return '<p style="color: red; text-align: center;">[Bozuk resim - ' + e.message + ']</p>';
        }
    });

    return html;
}

// Resim ekleme
function insertImageAdvanced(base64Data, mimeType, fileName) {
    hidePlaceholder();

    if (!base64Data || !mimeType) {
        console.error('GeÃ§ersiz resim verisi');
        insertText('[Resim yÃ¼klenemedi - geÃ§ersiz veri]');
        return false;
    }

    try {
        // Base64 doÄŸrulama
        let cleanBase64 = base64Data.replace(/\s+/g, '').replace(/[^A-Za-z0-9+/=]/g, '');
        atob(cleanBase64);

        let imgHtml = '<img src="data:' + mimeType + ';base64,' + cleanBase64 + '" ' +
                      'style="max-width: 100%; height: auto; margin: 10px 0; border: 1px solid #ddd;" ' +
                      'alt="' + (fileName || 'Belge Resmi') + '" ' +
                      'title="' + (fileName || 'Belge Resmi') + '" ' +
                      'data-image-name="' + (fileName || 'image') + '" />';

        // Ä°mleci kontrol et ve resmi ekle
        let selection = window.getSelection();
        if (selection.rangeCount > 0) {
            let range = selection.getRangeAt(0);
            range.deleteContents();

            let tempDiv = document.createElement('div');
            tempDiv.innerHTML = imgHtml + '<p><br></p>'; // Resim sonrasÄ± boÅŸ paragraf

            while (tempDiv.firstChild) {
                range.insertNode(tempDiv.firstChild);
            }
        } else {
            // Fallback: sona ekle
            editor.innerHTML += imgHtml + '<p><br></p>';
        }

        editor.focus();
        notifyContentChange();

        console.log('âœ… Resim baÅŸarÄ±yla eklendi:', fileName);
        return true;

    } catch (e) {
        console.error('âŒ Resim ekleme hatasÄ±:', e);
        insertText('[Resim ekleme hatasÄ±: ' + e.message + ']');
        return false;
    }
}

// SeÃ§ili resmi sil
function deleteSelectedImage() {
    let selection = window.getSelection();
    if (selection.rangeCount > 0) {
        let range = selection.getRangeAt(0);
        let container = range.commonAncestorContainer;

        // SeÃ§ili element veya parent'Ä±nda resim var mÄ±?
        let imgElement = null;
        if (container.nodeType === Node.ELEMENT_NODE && container.tagName === 'IMG') {
            imgElement = container;
        } else if (container.nodeType === Node.ELEMENT_NODE) {
            imgElement = container.querySelector('img');
        } else if (container.parentNode && container.parentNode.tagName === 'IMG') {
            imgElement = container.parentNode;
        }

        if (imgElement) {
            let imageName = imgElement.getAttribute('data-image-name') || 'Resim';

            // Onay iste
            if (confirm('Bu resmi silmek istediÄŸinizden emin misiniz?\n(' + imageName + ')')) {
                imgElement.remove();
                notifyContentChange();
                console.log('ðŸ—‘ï¸ Resim silindi:', imageName);
                return true;
            }
        } else {
            console.log('â„¹ï¸ Silinecek resim bulunamadÄ±');
        }
    }
    return false;
}

// TÃ¼m resimleri listele
function getAllImages() {
    let images = editor.querySelectorAll('img');
    let imageList = [];

    images.forEach((img, index) => {
        imageList.push({
            index: index,
            src: img.src.substring(0, 50) + '...',
            alt: img.alt || 'AdsÄ±z resim',
            name: img.getAttribute('data-image-name') || 'image_' + index,
            width: img.offsetWidth,
            height: img.offsetHeight
        });
    });

    console.log('ðŸ“Š EditÃ¶rdeki resimler:', imageList);
    return imageList;
}

// Resim boyutlandÄ±rma
function resizeSelectedImage(width, height) {
    let selection = window.getSelection();
    if (selection.rangeCount > 0) {
        let range = selection.getRangeAt(0);
        let container = range.commonAncestorContainer;

        let imgElement = null;
        if (container.nodeType === Node.ELEMENT_NODE && container.tagName === 'IMG') {
            imgElement = container;
        } else if (container.nodeType === Node.ELEMENT_NODE) {
            imgElement = container.querySelector('img');
        }

        if (imgElement) {
            if (width) imgElement.style.width = width + 'px';
            if (height) imgElement.style.height = height + 'px';

            notifyContentChange();
            console.log('ðŸ“ Resim boyutlandÄ±rÄ±ldÄ±:', width + 'x' + height);
            return true;
        }
    }
    return false;
}

// GeliÅŸmiÅŸ resim seÃ§imi ve highlight
let selectedImage = null;

editor.addEventListener('click', function(e) {
    // Ã–nceki seÃ§imi temizle
    if (selectedImage) {
        selectedImage.style.border = '1px solid #ddd';
        selectedImage = null;
    }

    if (e.target.tagName === 'IMG') {
        selectedImage = e.target;
        selectedImage.style.border = '3px solid #1976D2';
        selectedImage.style.boxShadow = '0 0 10px rgba(25, 118, 210, 0.5)';

        console.log('ðŸ–¼ï¸ Resim seÃ§ildi:', selectedImage.getAttribute('data-image-name'));

        // Android'e bildir (eÄŸer callback varsa)
        if (window.Android && window.Android.onImageSelected) {
            window.Android.onImageSelected(selectedImage.getAttribute('data-image-name') || 'AdsÄ±z resim');
        }
    }
});

// GeliÅŸmiÅŸ klavye shortcut'larÄ±
editor.addEventListener('keydown', function(e) {
    // Delete/Backspace ile seÃ§ili resmi sil
    if ((e.key === 'Delete' || e.key === 'Backspace') && selectedImage) {
        e.preventDefault();

        let imageName = selectedImage.getAttribute('data-image-name') || 'Resim';
        selectedImage.remove();
        selectedImage = null;

        notifyContentChange();
        console.log('ðŸ—‘ï¸ Klavye ile resim silindi:', imageName);
        return;
    }

    // Ctrl+Alt+I ile resim bilgileri
    if (e.ctrlKey && e.altKey && e.key === 'i') {
        e.preventDefault();
        let imageList = getAllImages();
        alert('EditÃ¶rde ' + imageList.length + ' resim bulunuyor:\n' +
              imageList.map(img => 'â€¢ ' + img.name + ' (' + img.width + 'x' + img.height + ')').join('\n'));
    }
});

// Resim yÃ¼kleme durumu kontrolÃ¼
function validateImageIntegrity() {
    let images = editor.querySelectorAll('img');
    let validImages = 0;
    let invalidImages = 0;

    images.forEach((img, index) => {
        try {
            if (img.src.startsWith('data:image/')) {
                let base64Part = img.src.split(',')[1];
                atob(base64Part); // Test decode
                validImages++;
            } else {
                invalidImages++;
            }
        } catch (e) {
            console.error('âŒ GeÃ§ersiz resim bulundu:', index, e);
            img.style.border = '2px solid red';
            img.title = 'GeÃ§ersiz resim: ' + e.message;
            invalidImages++;
        }
    });

    console.log('ðŸ“Š Resim durumu - GeÃ§erli:', validImages, 'GeÃ§ersiz:', invalidImages);
    return { valid: validImages, invalid: invalidImages };
}

// EditÃ¶r baÅŸlatÄ±ldÄ±ÄŸÄ±nda resim doÄŸrulamasÄ± yap
window.addEventListener('load', function() {
    setTimeout(() => {
        validateImageIntegrity();
    }, 1000);
});

// Format koruma iÃ§in geliÅŸmiÅŸ getHtml
function getHtmlWithFormats() {
    if (isPlaceholderVisible) {
        return '<p><br></p>';
    }

    let html = editor.innerHTML;

    // FormatlarÄ± koruyarak temizle
    html = preserveFormatsInHtml(html);

    return html;
}

// HTML formatlarÄ±nÄ± korur
function preserveFormatsInHtml(html) {
    // Inline style'larÄ± span tag'larÄ±na Ã§evir
    html = html.replace(/style="([^"]*)"/g, function(match, styles) {
        return 'style="' + styles + '"';
    });

    // Font ailesi, boyut ve renk bilgilerini koru
    html = html.replace(/<font[^>]*>(.*?)<\/font>/gi, function(match, content) {
        // Font tag'larÄ±nÄ± span'a Ã§evir (eski format desteÄŸi)
        return '<span>' + content + '</span>';
    });

    return html;
}

// Android'den Ã§aÄŸrÄ±lacak yeni fonksiyonlar
function insertImageFromAndroid(base64Data, mimeType, fileName) {
    return insertImageAdvanced(base64Data, mimeType, fileName);
}

function deleteSelectedImageFromAndroid() {
    return deleteSelectedImage();
}

function getImageCountFromAndroid() {
    return editor.querySelectorAll('img').length;
}

function validateImagesFromAndroid() {
    return validateImageIntegrity();
}
// Debug: Resim sayÄ±sÄ±nÄ± kontrol et
function getImageCount() {
    let images = editor.querySelectorAll('img');
    console.log('EditÃ¶rdeki resim sayÄ±sÄ±:', images.length);
    return images.length;
}
            // Debug fonksiyonlarÄ±
            function debugEditor() {
                console.log('=== EDITOR DEBUG ===');
                console.log('innerHTML:', editor.innerHTML);
                console.log('innerText:', editor.innerText);
                console.log('isPlaceholderVisible:', isPlaceholderVisible);
                console.log('getHtml():', getHtml());
                console.log('==================');
            }

            // Global debug eriÅŸimi
            window.debugEditor = debugEditor;

            // Keyboard shortcuts
            editor.addEventListener('keydown', function(e) {
                if (e.ctrlKey || e.metaKey) {
                    switch(e.key) {
                        case 'b':
                            e.preventDefault();
                            setBold();
                            break;
                        case 'i':
                            e.preventDefault();
                            setItalic();
                            break;
                        case 'u':
                            e.preventDefault();
                            setUnderline();
                            break;
                        case 'z':
                            if (e.shiftKey) {
                                e.preventDefault();
                                redo();
                            } else {
                                e.preventDefault();
                                undo();
                            }
                            break;
                        case 'a':
                            e.preventDefault();
                            selectAll();
                            break;
                    }
                }
            });
        </script>
    </body>
</html>